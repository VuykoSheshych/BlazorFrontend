@page "/games/{gameId}"

@using Frontend.Shared.Models
@inject GameRecordService GameService
@inject NavigationManager NavigationManager

@if (game == null)
{
	<MudProgressCircular Indeterminate Color="Color.Primary" />
}
else
{
	<GameNotation Moves="game.Moves" Players="(game.PlayerWhite, game.PlayerBlack)"></GameNotation>
}

<MudButton OnClick="GoBack" Color="Color.Primary" Variant="Variant.Filled">Back</MudButton>

@code
{
	[Parameter] public required string gameId { get; set; }
	private GameRecord? game;
	protected override async Task OnInitializedAsync()
	{
		if (Guid.TryParse(gameId, out var parsedGameId))
		{
			game = await GameService.GetGameByIdAsync(parsedGameId);
		}
		else
		{
			Console.WriteLine("Invalid gameId.");
		}
	}
	private void GoBack() => NavigationManager.NavigateTo("/games");
}